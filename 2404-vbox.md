# 在VBox中初始化Ubuntu-24.04

by 华佗

------

[TOC]

------

## 安装

略。

## 基础工具

```shell
#!/bin/bash
# Base: Ubuntu24.04LST

# 更换软件源
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
sudo vim /etc/apt/sources.list
"
deb http://mirrors.aliyun.com/ubuntu/ noble main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ noble-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ noble-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ noble-backports main restricted universe multiverse
"

# update
sudo apt-get update
sudo apt-get upgrade
sudo apt install software-properties-common -y
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get update
sudo apt install pipx -y
# sudo ln -s /usr/bin/pipx /usr/bin/pip
sudo apt install python3-pip -y  # sudo mv /usr/lib/python3.12/EXTERNALLY-MANAGED /usr/lib/python3.12/EXTERNALLY-MANAGED.bak
sudo apt install python3-venv
# sudo apt install python3.8-venv
# export PATH=$PATH:$HOME/.local/bin/
# 重启一次

# install
sudo apt install build-essential -y
sudo apt-get install libsystemd-dev -y
sudo apt-get install clangd -y
sudo apt install tree -y
sudo apt install curl -y
sudo apt install net-tools -y
sudo apt-get install lib32stdc++6 -y
sudo apt-get install openssh-server -y
sudo apt-get install neofetch -y
sudo apt install lcov -y
sudo apt-get install bear -y
sudo apt-get install tofrodos -y  # fromdos/todos
sudo apt-get install vim -y
sudo apt install xclip -y
sudo apt-get install ripgrep -y
sudo apt install fd-find -y
sudo apt install python3.8 -y
sudo apt-get install ninja-build -y
sudo apt install cmake -y  # cmake --version
# sudo apt-get install cmake-curses-gui  # ccmake --version
# 重启一次

# nodejs
curl -fsSL https://deb.nodesource.com/setup_current.x | sudo -E bash -
sudo apt-get install -y nodejs
sudo apt-get install npm -y
sudo npm install n -g
sudo n stable
sudo npm install -g yarn


# 其他工具安装参考22.04的文档

```

## git配置

参考22.04指导。

## 字体安装

安装Hack字体

搜索图形 https://www.nerdfonts.com/cheat-sheet

带补丁 https://github.com/ryanoasis/nerd-fonts/tree/master/patched-fonts/Hack/Bold

```shell
wget https://github.com/ryanoasis/nerd-fonts/releases/download/v3.3.0/Hack.zip
unzip ./Hack.zip
mkdir -p ~/.local/share/fonts  
cp ./hack/Hack*.ttf -t ~/.local/share/fonts
fc-cache -f -v
# 重启终端 选择Hack Nerd Font字体
```

## 输入法

1. 打开系统设置（ “Settings”）。
2. 选择地区和语言（“Region & Language”）。
3. 点击“Manage Installed Languages”。
4. 点击“Install/Remove Languages”勾选Chinese，可以同时勾选简体中文和繁体中文。
5. 点击“Apply Changes”。这需要管理员权限，你需要输入密码或请求的管理员账户的密码。
6. 中文正在被安装，相应的中文输入法也会一并被安装。安装完成后，你需要先退出登录，重新登录后新的语言选项才会被加载。
7. 重新登录后，再次打开系统设置（“Settings”）。
8. 选择 “Keyboard”。
9. 在 “Input Sources”下，点击 “+” 号来添加新的输入法。
10. 点击“Chinese”，并选择 “Chinese (Intelligent Pinyin)”。
11. 点击“Add”，智能拼音输入法就被成功加入到输入法之中了。

### 输入法 搜狗
下面的方法在18.04中可以，在24.04中没有成功，谨慎使用，先备份环境

官网：https://pinyin.sogou.com/linux/help.php

sudo apt-get install fcitx

1. 打开 系统设置——区域和语言——管理已安装的语言——在“语言”tab下——点击“添加或删除语言”
2. 弹出“已安装语言”窗口，勾选中文（简体），点击应用
3. 回到“语言支持”窗口，在键盘输入法系统中，选择“fcitx”

```shell
sudo cp /usr/share/applications/fcitx.desktop /etc/xdg/autostart/  # fcitx开机自启动
sudo apt purge ibus  # 删除ibus框架
sudo dpkg -i sogoupinyin_版本号_amd64.deb  # 安装搜狗
sudo apt install libqt5qml5 libqt5quick5 libqt5quickwidgets5 qml-module-qtquick2  # 安装依赖
sudo apt install libgsettings-qt1
# 重启
```

## samba

```shell
sudo apt-get install samba -y
sudo apt-get install cifs-utils -y
sudo apt-get install samba-common -y
sudo mkdir -p /home/share
sudo chmod 777 -R /home/share
sudo vi /etc/samba/smb.conf
"
[share]
    path = /home/share
    available = yes
    browseable = yes
    public = no
    writable = yes
"
sudo smbpasswd -a huatuo
sudo service smbd restart
```

## chrome

```shell
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo apt install ./google-chrome-stable_current_amd64.deb
```

## python2

```shell
wget https://www.python.org/ftp/python/2.7.18/Python-2.7.18.tgz
tar xzf Python-2.7.18.tgz
cd Python-2.7.18
sudo ./configure --enable-optimizations
sudo make altinstall
python2.7 -V
which python2.7
sudo ln -s /usr/local/bin/python2.7 /usr/local/bin/python2
```

## 删除多余工具

```shell
# remove
sudo apt-get remove libreoffice-common
sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca gnome-sudoku

# 删除snap
snap remove --purge firefox
snap remove --purge snap-store
snap remove --purge gnome-42-2204
snap remove --purge gtk-common-themes
snap remove --purge snapd-desktop-integration
snap remove --purge bare
snap remove --purge firmware-updater
snap remove --purge canonical-livepatch
snap remove --purge core22
snap remove --purge snapd

sudo apt remove --autoremove snapd -y
cat /etc/apt/preferences.d/nosnap.pref
"
# To prevent repository packages from triggering the installation of snap,
# this file forbids snapd from being installed by APT.

Package: snapd
Pin: release a=*
Pin-Priority: -10
"
sudo apt update
rm -rf ~/snap/
sudo rm -rf /snap/
sudo rm -rf /var/cache/snapd/
sudo rm -rf /var/lib/snapd/

# clean
sudo apt autoclean
sudo apt clean
sudo apt autoremove
```